---
source: crates/as2_pcode/src/codegen/tests.rs
expression: builder
input_file: samples/as2/for_loop.as
---
Push "for_classic"
Trace
Push "i"
Push 0
DefineLocal
loc0002: Push "i"
GetVariable
Push 3
Less2
Not
If loc0000
Push "i"
GetVariable
Trace
loc0001: Push "i"
Push "i"
GetVariable
Increment
SetVariable
Jump loc0002
loc0000: Push "for_no_init"
Trace
Push "j"
Push 3
DefineLocal
Push "start"
Trace
loc0005: Push "j"
GetVariable
Push 6
Less2
Not
If loc0003
Push "j"
GetVariable
Trace
loc0004: Push "j"
Push "j"
GetVariable
Increment
SetVariable
Jump loc0005
loc0003: Push "end"
Trace
Push "for_no_condition"
Trace
Push "k"
Push 0
DefineLocal
loc0008: Push "k"
GetVariable
Trace
Push "k"
GetVariable
Push 3
Less2
Not
Not
If loc0009
Jump loc0006
loc0009: loc0007: Push "k"
Push "k"
GetVariable
Increment
SetVariable
Jump loc0008
loc0006: Push "for_no_update"
Trace
Push "n"
Push 0
DefineLocal
loc000c: Push "n"
GetVariable
Push 3
Less2
Not
If loc000a
Push "n"
GetVariable
Trace
Push "n"
Push "n"
GetVariable
Increment
SetVariable
loc000b: Jump loc000c
loc000a: Push "for_all_omitted"
Trace
Push "count"
Push 0
DefineLocal
loc000f: Push "loop"
Trace
Push "count"
Push "count"
GetVariable
Increment
SetVariable
Push "count"
GetVariable
Push 3
Equals2
Not
If loc0010
Jump loc000d
loc0010: loc000e: Jump loc000f
loc000d: Push "done"
Trace
Push "for_in_object"
Trace
Push "obj"
Push 0
InitObject
DefineLocal
Push "obj"
GetVariable
Push "a"
Push 10
SetMember
Push "obj"
GetVariable
Push "b"
Push 20
SetMember
Push "obj"
GetVariable
Enumerate2
loc0012: StoreRegister 0
Push null
Equals2
If loc0011
Push "key"
Push register0
DefineLocal
Push "key"
GetVariable
Push "="
Add2
Push "obj"
GetVariable
Push "key"
GetVariable
GetMember
Add2
Trace
Jump loc0012
loc0011: Push "for_in_array"
Trace
Push "arr"
Push 7
Push 6
Push 5
Push 3
InitArray
DefineLocal
Push "idx"
DefineLocal2
Push "arr"
GetVariable
Enumerate2
loc0014: StoreRegister 0
Push null
Equals2
If loc0013
Push "idx"
Push register0
SetVariable
Push "idx"
GetVariable
Push "="
Add2
Push "arr"
GetVariable
Push "idx"
GetVariable
GetMember
Add2
Trace
Jump loc0014
loc0013: Push "for_multiple_clauses"
Trace
Push "a"
Push 0
DefineLocal
Push "b"
Push 3
DefineLocal
loc0017: Push "a"
GetVariable
Push "b"
GetVariable
Less2
Not
If loc0015
Push "a"
GetVariable
Push ","
Add2
Push "b"
GetVariable
Add2
Trace
loc0016: Push "a"
Push "a"
GetVariable
Increment
SetVariable
Push "b"
Push "b"
GetVariable
Decrement
SetVariable
Jump loc0017
loc0015: Push "for_continue_break"
Trace
Push "x"
Push 0
DefineLocal
loc001a: Push "x"
GetVariable
Push 10
Less2
Not
If loc0018
Push "x"
GetVariable
Push 5
Equals2
Not
If loc001b
Jump loc0018
loc001b: Push "x"
GetVariable
Push 2
Modulo
Push 1
Equals2
Not
If loc001c
Jump loc0019
loc001c: Push "x"
GetVariable
Trace
loc0019: Push "x"
Push "x"
GetVariable
Increment
SetVariable
Jump loc001a
loc0018: Push "for_nested"
Trace
Push "outer"
Push 0
DefineLocal
loc001f: Push "outer"
GetVariable
Push 2
Less2
Not
If loc001d
Push "inner"
Push 0
DefineLocal
loc0022: Push "inner"
GetVariable
Push 2
Less2
Not
If loc0020
Push "outer"
GetVariable
Push ","
Add2
Push "inner"
GetVariable
Add2
Trace
loc0021: Push "inner"
Push "inner"
GetVariable
Increment
SetVariable
Jump loc0022
loc0020: loc001e: Push "outer"
Push "outer"
GetVariable
Increment
SetVariable
Jump loc001f
loc001d: Push "for_existing_var"
Trace
Push "z"
DefineLocal2
Push "z"
Push 1
SetVariable
loc0025: Push "z"
GetVariable
Push 3
Greater
Not
Not
If loc0023
Push "z"
GetVariable
Trace
loc0024: Push "z"
Push "z"
GetVariable
Increment
SetVariable
Jump loc0025
loc0023: Push "for_single_statement_body"
Trace
Push "q"
Push 0
DefineLocal
loc0028: Push "q"
GetVariable
Push 3
Less2
Not
If loc0026
Push "q"
GetVariable
Trace
loc0027: Push "q"
Push "q"
GetVariable
Increment
SetVariable
Jump loc0028
loc0026:
