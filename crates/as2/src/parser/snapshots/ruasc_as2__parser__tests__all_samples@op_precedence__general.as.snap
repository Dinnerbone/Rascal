---
source: crates/as2/src/parser/tests.rs
expression: parsed
input_file: samples/op_precedence/general.as
---
Ok:
  statements:
    - Declare:
        - name: one
          value:
            Constant:
              Integer: 1
    - Declare:
        - name: two
          value:
            Constant:
              Integer: 2
    - Declare:
        - name: three
          value:
            Constant:
              Integer: 3
    - Declare:
        - name: four
          value:
            Constant:
              Integer: 4
    - Declare:
        - name: five
          value:
            Constant:
              Integer: 5
    - Declare:
        - name: ten
          value:
            Constant:
              Integer: 10
    - Declare:
        - name: zero
          value:
            Constant:
              Integer: 0
    - Declare:
        - name: negOne
          value:
            UnaryOperator:
              - Sub
              - Constant:
                  Integer: 1
    - Declare:
        - name: a
          value: ~
    - Declare:
        - name: b
          value: ~
    - Declare:
        - name: c
          value: ~
    - Declare:
        - name: p
          value: ~
    - Declare:
        - name: s
          value:
            Constant:
              String: s
    - Declare:
        - name: t
          value:
            Constant:
              String: t
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + two * three = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - Constant:
                          Identifier: one
                      - BinaryOperator:
                          - Multiply
                          - Constant:
                              Identifier: two
                          - Constant:
                              Identifier: three
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(one + two) * three = "
                - Parenthesis:
                    BinaryOperator:
                      - Multiply
                      - Parenthesis:
                          BinaryOperator:
                            - Add
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: two
                      - Constant:
                          Identifier: three
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "-one * two = "
                - Parenthesis:
                    BinaryOperator:
                      - Multiply
                      - UnaryOperator:
                          - Sub
                          - Constant:
                              Identifier: one
                      - Constant:
                          Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "-(one * two) = "
                - Parenthesis:
                    UnaryOperator:
                      - Sub
                      - Parenthesis:
                          BinaryOperator:
                            - Multiply
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: two
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: p
          - Constant:
              Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "++p + p++ = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - UnaryOperator:
                          - Increment: Prefix
                          - Constant:
                              Identifier: p
                      - UnaryOperator:
                          - Increment: Postfix
                          - Constant:
                              Identifier: p
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: p
          - Constant:
              Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "p++ * 2 = "
                - Parenthesis:
                    BinaryOperator:
                      - Multiply
                      - UnaryOperator:
                          - Increment: Postfix
                          - Constant:
                              Identifier: p
                      - Constant:
                          Integer: 2
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: p
          - Constant:
              Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "2 * ++p = "
                - Parenthesis:
                    BinaryOperator:
                      - Multiply
                      - Constant:
                          Integer: 2
                      - UnaryOperator:
                          - Increment: Prefix
                          - Constant:
                              Identifier: p
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "four / two * two = "
                - Parenthesis:
                    BinaryOperator:
                      - Multiply
                      - BinaryOperator:
                          - Divide
                          - Constant:
                              Identifier: four
                          - Constant:
                              Identifier: two
                      - Constant:
                          Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + two << one = "
                - Parenthesis:
                    BinaryOperator:
                      - BitShiftLeft
                      - BinaryOperator:
                          - Add
                          - Constant:
                              Identifier: one
                          - Constant:
                              Identifier: two
                      - Constant:
                          Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(one + two) << one = "
                - Parenthesis:
                    BinaryOperator:
                      - BitShiftLeft
                      - Parenthesis:
                          BinaryOperator:
                            - Add
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: two
                      - Constant:
                          Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + (two << one) = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - Constant:
                          Identifier: one
                      - Parenthesis:
                          BinaryOperator:
                            - BitShiftLeft
                            - Constant:
                                Identifier: two
                            - Constant:
                                Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + two < five = "
                - Parenthesis:
                    BinaryOperator:
                      - LessThan
                      - BinaryOperator:
                          - Add
                          - Constant:
                              Identifier: one
                          - Constant:
                              Identifier: two
                      - Constant:
                          Identifier: five
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(one + two) < five = "
                - Parenthesis:
                    BinaryOperator:
                      - LessThan
                      - Parenthesis:
                          BinaryOperator:
                            - Add
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: two
                      - Constant:
                          Identifier: five
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + (two < five) = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - Constant:
                          Identifier: one
                      - Parenthesis:
                          BinaryOperator:
                            - LessThan
                            - Constant:
                                Identifier: two
                            - Constant:
                                Identifier: five
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + two == three = "
                - Parenthesis:
                    BinaryOperator:
                      - Equal
                      - BinaryOperator:
                          - Add
                          - Constant:
                              Identifier: one
                          - Constant:
                              Identifier: two
                      - Constant:
                          Identifier: three
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(one + two) == three = "
                - Parenthesis:
                    BinaryOperator:
                      - Equal
                      - Parenthesis:
                          BinaryOperator:
                            - Add
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: two
                      - Constant:
                          Identifier: three
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + (two == three) = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - Constant:
                          Identifier: one
                      - Parenthesis:
                          BinaryOperator:
                            - Equal
                            - Constant:
                                Identifier: two
                            - Constant:
                                Identifier: three
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one | two == three = "
                - Parenthesis:
                    BinaryOperator:
                      - BitOr
                      - Constant:
                          Identifier: one
                      - BinaryOperator:
                          - Equal
                          - Constant:
                              Identifier: two
                          - Constant:
                              Identifier: three
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(one | two) == three = "
                - Parenthesis:
                    BinaryOperator:
                      - Equal
                      - Parenthesis:
                          BinaryOperator:
                            - BitOr
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: two
                      - Constant:
                          Identifier: three
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one | (two == three) = "
                - Parenthesis:
                    BinaryOperator:
                      - BitOr
                      - Constant:
                          Identifier: one
                      - Parenthesis:
                          BinaryOperator:
                            - Equal
                            - Constant:
                                Identifier: two
                            - Constant:
                                Identifier: three
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one & three | two = "
                - Parenthesis:
                    BinaryOperator:
                      - BitOr
                      - BinaryOperator:
                          - BitAnd
                          - Constant:
                              Identifier: one
                          - Constant:
                              Identifier: three
                      - Constant:
                          Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(one & three) | two = "
                - Parenthesis:
                    BinaryOperator:
                      - BitOr
                      - Parenthesis:
                          BinaryOperator:
                            - BitAnd
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: three
                      - Constant:
                          Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one & (three | two) = "
                - Parenthesis:
                    BinaryOperator:
                      - BitAnd
                      - Constant:
                          Identifier: one
                      - Parenthesis:
                          BinaryOperator:
                            - BitOr
                            - Constant:
                                Identifier: three
                            - Constant:
                                Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "~one = "
                - Parenthesis:
                    UnaryOperator:
                      - BitNot
                      - Constant:
                          Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "-~one = "
                - Parenthesis:
                    UnaryOperator:
                      - Sub
                      - UnaryOperator:
                          - BitNot
                          - Constant:
                              Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(one < two && three > two) = "
                - Parenthesis:
                    Parenthesis:
                      BinaryOperator:
                        - LogicalAnd
                        - BinaryOperator:
                            - LessThan
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: two
                        - BinaryOperator:
                            - GreaterThan
                            - Constant:
                                Identifier: three
                            - Constant:
                                Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(one > two || three > two) = "
                - Parenthesis:
                    Parenthesis:
                      BinaryOperator:
                        - LogicalOr
                        - BinaryOperator:
                            - GreaterThan
                            - Constant:
                                Identifier: one
                            - Constant:
                                Identifier: two
                        - BinaryOperator:
                            - GreaterThan
                            - Constant:
                                Identifier: three
                            - Constant:
                                Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one & three && two > zero = "
                - Parenthesis:
                    BinaryOperator:
                      - LogicalAnd
                      - BinaryOperator:
                          - BitAnd
                          - Constant:
                              Identifier: one
                          - Constant:
                              Identifier: three
                      - BinaryOperator:
                          - GreaterThan
                          - Constant:
                              Identifier: two
                          - Constant:
                              Identifier: zero
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one < two ? five : ten = "
                - Parenthesis:
                    Ternary:
                      condition:
                        BinaryOperator:
                          - LessThan
                          - Constant:
                              Identifier: one
                          - Constant:
                              Identifier: two
                      "yes":
                        Constant:
                          Identifier: five
                      "no":
                        Constant:
                          Identifier: ten
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + two < three ? five : ten = "
                - Parenthesis:
                    Ternary:
                      condition:
                        BinaryOperator:
                          - LessThan
                          - BinaryOperator:
                              - Add
                              - Constant:
                                  Identifier: one
                              - Constant:
                                  Identifier: two
                          - Constant:
                              Identifier: three
                      "yes":
                        Constant:
                          Identifier: five
                      "no":
                        Constant:
                          Identifier: ten
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: a
          - Constant:
              Integer: 0
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: b
          - Constant:
              Integer: 0
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: c
          - Constant:
              Identifier: five
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: a
          - BinaryOperator:
              - Assign
              - Constant:
                  Identifier: b
              - Constant:
                  Identifier: c
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "a after a = b = c -> "
                - Constant:
                    Identifier: a
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "b after a = b = c -> "
                - Constant:
                    Identifier: b
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: a
          - Constant:
              Integer: 1
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: b
          - Constant:
              Integer: 2
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: c
          - Constant:
              Integer: 3
    - Expr:
        BinaryOperator:
          - AddAssign
          - Constant:
              Identifier: a
          - BinaryOperator:
              - Multiply
              - Constant:
                  Identifier: b
              - Constant:
                  Identifier: c
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "a after a += b * c = "
                - Constant:
                    Identifier: a
    - Declare:
        - name: obj
          value:
            New:
              name:
                Constant:
                  Identifier: Object
              args: []
    - Expr:
        BinaryOperator:
          - Assign
          - Field:
              - Constant:
                  Identifier: obj
              - Constant:
                  String: x
          - Constant:
              Integer: 2
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "obj.x + two = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - Field:
                          - Constant:
                              Identifier: obj
                          - Constant:
                              String: x
                      - Constant:
                          Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "typeof one = "
                - TypeOf:
                    - Constant:
                        Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "typeof s = "
                - TypeOf:
                    - Constant:
                        Identifier: s
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: a
          - Constant:
              Integer: 1
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: b
          - Constant:
              Integer: 2
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: c
          - Constant:
              Integer: 3
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: a
          - Ternary:
              condition:
                Parenthesis:
                  BinaryOperator:
                    - GreaterThan
                    - Constant:
                        Identifier: b
                    - Constant:
                        Identifier: c
              "yes":
                Constant:
                  Identifier: b
              "no":
                Constant:
                  Identifier: c
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "a after a = (b>c)?b:c = "
                - Constant:
                    Identifier: a
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: a
          - Constant:
              Integer: 1
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: b
          - Constant:
              Integer: 2
    - Expr:
        BinaryOperator:
          - Assign
          - Constant:
              Identifier: c
          - Constant:
              Integer: 3
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "a + b * c << one & three == ((a + (b * c)) << one & three) ? five : ten = "
                - Parenthesis:
                    Ternary:
                      condition:
                        BinaryOperator:
                          - Equal
                          - Parenthesis:
                              BinaryOperator:
                                - BitAnd
                                - BinaryOperator:
                                    - BitShiftLeft
                                    - BinaryOperator:
                                        - Add
                                        - Constant:
                                            Identifier: a
                                        - BinaryOperator:
                                            - Multiply
                                            - Constant:
                                                Identifier: b
                                            - Constant:
                                                Identifier: c
                                    - Constant:
                                        Identifier: one
                                - Constant:
                                    Identifier: three
                          - Parenthesis:
                              BinaryOperator:
                                - BitAnd
                                - BinaryOperator:
                                    - BitShiftLeft
                                    - Parenthesis:
                                        BinaryOperator:
                                          - Add
                                          - Constant:
                                              Identifier: a
                                          - Parenthesis:
                                              BinaryOperator:
                                                - Multiply
                                                - Constant:
                                                    Identifier: b
                                                - Constant:
                                                    Identifier: c
                                    - Constant:
                                        Identifier: one
                                - Constant:
                                    Identifier: three
                      "yes":
                        Constant:
                          Identifier: five
                      "no":
                        Constant:
                          Identifier: ten
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "+one + +two = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - Constant:
                          Identifier: one
                      - Constant:
                          Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "-one + -two = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - UnaryOperator:
                          - Sub
                          - Constant:
                              Identifier: one
                      - UnaryOperator:
                          - Sub
                          - Constant:
                              Identifier: two
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "ten % three + one = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - BinaryOperator:
                          - Modulo
                          - Constant:
                              Identifier: ten
                          - Constant:
                              Identifier: three
                      - Constant:
                          Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "(ten % three) + one = "
                - Parenthesis:
                    BinaryOperator:
                      - Add
                      - Parenthesis:
                          BinaryOperator:
                            - Modulo
                            - Constant:
                                Identifier: ten
                            - Constant:
                                Identifier: three
                      - Constant:
                          Identifier: one
    - Expr:
        Call:
          name:
            Constant:
              Identifier: trace
          args:
            - BinaryOperator:
                - Add
                - Constant:
                    String: "one + two * three > four = "
                - Parenthesis:
                    BinaryOperator:
                      - GreaterThan
                      - BinaryOperator:
                          - Add
                          - Constant:
                              Identifier: one
                          - BinaryOperator:
                              - Multiply
                              - Constant:
                                  Identifier: two
                              - Constant:
                                  Identifier: three
                      - Constant:
                          Identifier: four
