---
source: crates/as2/src/program.rs
expression: parsed
input_file: samples/as2/typed_variables.as
---
Ok:
  initial_script:
    - Declare:
        - name: num
          value:
            span:
              start: 17
              end: 19
            value:
              Constant:
                Integer: 42
          type_name:
            span:
              start: 8
              end: 14
            value: Number
    - Declare:
        - name: str
          value:
            span:
              start: 38
              end: 45
            value:
              Constant:
                String: Hello
          type_name:
            span:
              start: 29
              end: 35
            value: String
    - Declare:
        - name: flag
          value:
            span:
              start: 66
              end: 70
            value:
              Constant:
                Boolean: true
          type_name:
            span:
              start: 56
              end: 63
            value: Boolean
    - Declare:
        - name: obj
          value:
            span:
              start: 89
              end: 91
            value:
              InitObject: []
          type_name:
            span:
              start: 80
              end: 86
            value: Object
    - Declare:
        - name: arr
          value:
            span:
              start: 109
              end: 111
            value:
              InitArray: []
          type_name:
            span:
              start: 101
              end: 106
            value: Array
    - Expr:
        span:
          start: 114
          end: 175
        value:
          Function:
            name: add
            args:
              - name: a
                type_name:
                  span:
                    start: 129
                    end: 135
                  value: Number
              - name: b
                type_name:
                  span:
                    start: 139
                    end: 145
                  value: Number
            body:
              - Return:
                  - span:
                      start: 167
                      end: 172
                    value:
                      BinaryOperator:
                        - Add
                        - span:
                            start: 167
                            end: 168
                          value:
                            Constant:
                              Identifier: a
                        - span:
                            start: 171
                            end: 172
                          value:
                            Constant:
                              Identifier: b
    - Expr:
        span:
          start: 177
          end: 236
        value:
          Function:
            name: getMessage
            args: []
            body:
              - Return:
                  - span:
                      start: 219
                      end: 233
                    value:
                      Constant:
                        String: Test message
    - Expr:
        span:
          start: 238
          end: 297
        value:
          Function:
            name: processData
            args:
              - name: data
                type_name:
                  span:
                    start: 264
                    end: 270
                  value: Object
            body:
              - Expr:
                  span:
                    start: 283
                    end: 294
                  value:
                    Trace:
                      span:
                        start: 289
                        end: 293
                      value:
                        Constant:
                          Identifier: data
    - Declare:
        - name: numbers
          value:
            span:
              start: 319
              end: 322
            value:
              New:
                name:
                  span:
                    start: 323
                    end: 328
                  value:
                    Constant:
                      Identifier: Array
                args: []
          type_name:
            span:
              start: 311
              end: 316
            value: Array
    - Declare:
        - name: strings
          value:
            span:
              start: 352
              end: 375
            value:
              InitArray:
                - span:
                    start: 353
                    end: 358
                  value:
                    Constant:
                      String: one
                - span:
                    start: 360
                    end: 365
                  value:
                    Constant:
                      String: two
                - span:
                    start: 367
                    end: 374
                  value:
                    Constant:
                      String: three
          type_name:
            span:
              start: 344
              end: 349
            value: Array
    - Declare:
        - name: someValue
          value:
            span:
              start: 401
              end: 406
            value:
              Constant:
                String: "123"
          type_name:
            span:
              start: 392
              end: 398
            value: Object
    - Declare:
        - name: numValue
          value:
            span:
              start: 430
              end: 447
            value:
              CastToNumber:
                span:
                  start: 437
                  end: 446
                value:
                  Constant:
                    Identifier: someValue
          type_name:
            span:
              start: 421
              end: 427
            value: Number
    - Declare:
        - name: strValue
          value:
            span:
              start: 471
              end: 481
            value:
              CastToString:
                span:
                  start: 478
                  end: 480
                value:
                  Constant:
                    Integer: 42
          type_name:
            span:
              start: 462
              end: 468
            value: String
    - Expr:
        span:
          start: 484
          end: 608
        value:
          Function:
            name: complexFunc
            args:
              - name: name
                type_name:
                  span:
                    start: 510
                    end: 516
                  value: String
              - name: age
                type_name:
                  span:
                    start: 522
                    end: 528
                  value: Number
              - name: isValid
                type_name:
                  span:
                    start: 538
                    end: 545
                  value: Boolean
            body:
              - Return:
                  - span:
                      start: 567
                      end: 605
                    value:
                      InitObject:
                        - - name
                          - span:
                              start: 574
                              end: 578
                            value:
                              Constant:
                                Identifier: name
                        - - age
                          - span:
                              start: 585
                              end: 588
                            value:
                              Constant:
                                Identifier: age
                        - - valid
                          - span:
                              start: 597
                              end: 604
                            value:
                              Constant:
                                Identifier: isValid
    - Declare:
        - name: userData
          value:
            span:
              start: 632
              end: 709
            value:
              InitObject:
                - - id
                  - span:
                      start: 641
                      end: 651
                    value:
                      BinaryOperator:
                        - Assign
                        - span:
                            start: 641
                            end: 647
                          value:
                            Constant:
                              Identifier: Number
                        - span:
                            start: 650
                            end: 651
                          value:
                            Constant:
                              Integer: 1
                - - name
                  - span:
                      start: 662
                      end: 677
                    value:
                      BinaryOperator:
                        - Assign
                        - span:
                            start: 662
                            end: 668
                          value:
                            Constant:
                              Identifier: String
                        - span:
                            start: 671
                            end: 677
                          value:
                            Constant:
                              String: User
                - - scores
                  - span:
                      start: 690
                      end: 707
                    value:
                      BinaryOperator:
                        - Assign
                        - span:
                            start: 690
                            end: 695
                          value:
                            Constant:
                              Identifier: Array
                        - span:
                            start: 698
                            end: 707
                          value:
                            InitArray:
                              - span:
                                  start: 699
                                  end: 700
                                value:
                                  Constant:
                                    Integer: 1
                              - span:
                                  start: 702
                                  end: 703
                                value:
                                  Constant:
                                    Integer: 2
                              - span:
                                  start: 705
                                  end: 706
                                value:
                                  Constant:
                                    Integer: 3
          type_name:
            span:
              start: 623
              end: 629
            value: Object
    - Expr:
        span:
          start: 712
          end: 849
        value:
          Function:
            name: forEach
            args:
              - name: arr
                type_name:
                  span:
                    start: 733
                    end: 738
                  value: Array
              - name: callback
                type_name:
                  span:
                    start: 749
                    end: 757
                  value: Function
            body:
              - ForIn:
                  condition:
                    Classic:
                      initialize:
                        Declare:
                          - name: i
                            value:
                              span:
                                start: 790
                                end: 791
                              value:
                                Constant:
                                  Integer: 0
                            type_name:
                              span:
                                start: 781
                                end: 787
                              value: Number
                      condition:
                        - span:
                            start: 793
                            end: 807
                          value:
                            BinaryOperator:
                              - LessThan
                              - span:
                                  start: 793
                                  end: 794
                                value:
                                  Constant:
                                    Identifier: i
                              - span:
                                  start: 800
                                  end: 807
                                value:
                                  Field:
                                    - span:
                                        start: 797
                                        end: 800
                                      value:
                                        Constant:
                                          Identifier: arr
                                    - span:
                                        start: 801
                                        end: 807
                                      value:
                                        Constant:
                                          String: length
                      update:
                        - span:
                            start: 810
                            end: 812
                          value:
                            UnaryOperator:
                              - Increment: Postfix
                              - span:
                                  start: 809
                                  end: 810
                                value:
                                  Constant:
                                    Identifier: i
                  body:
                    Block:
                      - Expr:
                          span:
                            start: 824
                            end: 840
                          value:
                            Call:
                              name:
                                span:
                                  start: 824
                                  end: 832
                                value:
                                  Constant:
                                    Identifier: callback
                              args:
                                - span:
                                    start: 836
                                    end: 839
                                  value:
                                    Field:
                                      - span:
                                          start: 833
                                          end: 836
                                        value:
                                          Constant:
                                            Identifier: arr
                                      - span:
                                          start: 837
                                          end: 838
                                        value:
                                          Constant:
                                            Identifier: i
